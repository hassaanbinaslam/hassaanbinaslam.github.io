<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-05-10">
<meta name="description" content="In this notebook, I demonstrate how to use the SageMaker Jumpstart to generate images from text using state-of-the-art Stable Diffusion models.">

<title>Build your own Generative AI Art Studio with Amazon SageMaker JumpStart – Random Thoughts</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ec1a476101e3788554028e6f9c82f7c1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D1ST9BH6HX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-D1ST9BH6HX', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Build your own Generative AI Art Studio with Amazon SageMaker JumpStart – Random Thoughts">
<meta property="og:description" content="In this notebook, I demonstrate how to use the SageMaker Jumpstart to generate images from text using state-of-the-art Stable Diffusion models.">
<meta property="og:image" content="https://hassaanbinaslam.github.io/posts/images/2023-05-10-amazon-jumpstart-text2img-stablediffusion.jpg">
<meta property="og:site_name" content="Random Thoughts">
<meta name="twitter:title" content="Build your own Generative AI Art Studio with Amazon SageMaker JumpStart – Random Thoughts">
<meta name="twitter:description" content="In this notebook, I demonstrate how to use the SageMaker Jumpstart to generate images from text using state-of-the-art Stable Diffusion models.">
<meta name="twitter:image" content="https://hassaanbinaslam.github.io/posts/images/2023-05-10-amazon-jumpstart-text2img-stablediffusion.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Random Thoughts</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/hassaanbinaslam/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/hassaanbinaslam/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/hassaanbinaslam"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#credits" id="toc-credits" class="nav-link active" data-scroll-target="#credits">Credits</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#what-is-amazon-sagemaker" id="toc-what-is-amazon-sagemaker" class="nav-link" data-scroll-target="#what-is-amazon-sagemaker">What Is Amazon SageMaker?</a></li>
  <li><a href="#what-is-sagemaker-jumpstart" id="toc-what-is-sagemaker-jumpstart" class="nav-link" data-scroll-target="#what-is-sagemaker-jumpstart">What is SageMaker JumpStart?</a></li>
  <li><a href="#what-is-stable-diffusion" id="toc-what-is-stable-diffusion" class="nav-link" data-scroll-target="#what-is-stable-diffusion">What is Stable Diffusion?</a></li>
  </ul></li>
  <li><a href="#environment" id="toc-environment" class="nav-link" data-scroll-target="#environment">Environment</a></li>
  <li><a href="#set-up-the-environment" id="toc-set-up-the-environment" class="nav-link" data-scroll-target="#set-up-the-environment">Set up the environment</a></li>
  <li><a href="#define-functions-to-deploy-models-and-get-inference-endpoints" id="toc-define-functions-to-deploy-models-and-get-inference-endpoints" class="nav-link" data-scroll-target="#define-functions-to-deploy-models-and-get-inference-endpoints">Define functions to deploy models and get inference endpoints</a></li>
  <li><a href="#define-functions-to-query-endpoints-and-display-results" id="toc-define-functions-to-query-endpoints-and-display-results" class="nav-link" data-scroll-target="#define-functions-to-query-endpoints-and-display-results">Define functions to query endpoints and display results</a>
  <ul class="collapse">
  <li><a href="#supported-inference-parameters" id="toc-supported-inference-parameters" class="nav-link" data-scroll-target="#supported-inference-parameters">Supported Inference parameters</a></li>
  </ul></li>
  <li><a href="#select-sagemaker-pre-trained-diffusion-model-and-prompt-engineering" id="toc-select-sagemaker-pre-trained-diffusion-model-and-prompt-engineering" class="nav-link" data-scroll-target="#select-sagemaker-pre-trained-diffusion-model-and-prompt-engineering">Select SageMaker pre-trained Diffusion model and Prompt Engineering</a>
  <ul class="collapse">
  <li><a href="#model-selection" id="toc-model-selection" class="nav-link" data-scroll-target="#model-selection">Model selection</a></li>
  <li><a href="#prompt-engineering" id="toc-prompt-engineering" class="nav-link" data-scroll-target="#prompt-engineering">Prompt engineering</a></li>
  </ul></li>
  <li><a href="#stable-diffusion-v2-1" id="toc-stable-diffusion-v2-1" class="nav-link" data-scroll-target="#stable-diffusion-v2-1">Stable Diffusion v2-1</a>
  <ul class="collapse">
  <li><a href="#realistic-people" id="toc-realistic-people" class="nav-link" data-scroll-target="#realistic-people">Realistic people</a></li>
  <li><a href="#architecture" id="toc-architecture" class="nav-link" data-scroll-target="#architecture">Architecture</a></li>
  <li><a href="#abstract-art-and-styles" id="toc-abstract-art-and-styles" class="nav-link" data-scroll-target="#abstract-art-and-styles">Abstract art and styles</a></li>
  <li><a href="#landscapes" id="toc-landscapes" class="nav-link" data-scroll-target="#landscapes">Landscapes</a></li>
  <li><a href="#portraits-and-paintings" id="toc-portraits-and-paintings" class="nav-link" data-scroll-target="#portraits-and-paintings">Portraits and paintings</a></li>
  </ul></li>
  <li><a href="#prompthero-openjourney" id="toc-prompthero-openjourney" class="nav-link" data-scroll-target="#prompthero-openjourney">PromptHero Openjourney</a>
  <ul class="collapse">
  <li><a href="#realistic-people-and-portraits" id="toc-realistic-people-and-portraits" class="nav-link" data-scroll-target="#realistic-people-and-portraits">Realistic people and portraits</a></li>
  <li><a href="#fairy-landscapes" id="toc-fairy-landscapes" class="nav-link" data-scroll-target="#fairy-landscapes">Fairy Landscapes</a></li>
  <li><a href="#other-digital-art-prompts" id="toc-other-digital-art-prompts" class="nav-link" data-scroll-target="#other-digital-art-prompts">Other digital art prompts</a></li>
  </ul></li>
  <li><a href="#fantasyai-anything-v4.0" id="toc-fantasyai-anything-v4.0" class="nav-link" data-scroll-target="#fantasyai-anything-v4.0">FantasyAI Anything V4.0</a>
  <ul class="collapse">
  <li><a href="#realistic-people-1" id="toc-realistic-people-1" class="nav-link" data-scroll-target="#realistic-people-1">Realistic people</a></li>
  <li><a href="#landscapes-1" id="toc-landscapes-1" class="nav-link" data-scroll-target="#landscapes-1">Landscapes</a></li>
  </ul></li>
  <li><a href="#mo-di-diffusion" id="toc-mo-di-diffusion" class="nav-link" data-scroll-target="#mo-di-diffusion">Mo Di Diffusion</a>
  <ul class="collapse">
  <li><a href="#realistic-people-2" id="toc-realistic-people-2" class="nav-link" data-scroll-target="#realistic-people-2">Realistic people</a></li>
  <li><a href="#landscapes-and-architectures" id="toc-landscapes-and-architectures" class="nav-link" data-scroll-target="#landscapes-and-architectures">Landscapes and architectures</a></li>
  </ul></li>
  <li><a href="#inkpunk-diffusion" id="toc-inkpunk-diffusion" class="nav-link" data-scroll-target="#inkpunk-diffusion">Inkpunk Diffusion</a>
  <ul class="collapse">
  <li><a href="#realistic-people-and-portraits-1" id="toc-realistic-people-and-portraits-1" class="nav-link" data-scroll-target="#realistic-people-and-portraits-1">Realistic people and portraits</a></li>
  <li><a href="#landscapes-and-architectures-1" id="toc-landscapes-and-architectures-1" class="nav-link" data-scroll-target="#landscapes-and-architectures-1">Landscapes and architectures</a></li>
  <li><a href="#other-digital-art-prompts-1" id="toc-other-digital-art-prompts-1" class="nav-link" data-scroll-target="#other-digital-art-prompts-1">Other digital art prompts</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Build your own Generative AI Art Studio with Amazon SageMaker JumpStart</h1>
  <div class="quarto-categories">
    <div class="quarto-category">aws</div>
    <div class="quarto-category">ml</div>
  </div>
  </div>

<div>
  <div class="description">
    In this notebook, I demonstrate how to use the SageMaker Jumpstart to generate images from text using state-of-the-art Stable Diffusion models.
  </div>
</div>


<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 10, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/2023-05-10-amazon-jumpstart-text2img-stablediffusion.jpg" class="img-fluid figure-img"></p>
<figcaption>image source: https://prompthero.com/prompt/967d64692e0</figcaption>
</figure>
</div>
<section id="credits" class="level2">
<h2 class="anchored" data-anchor-id="credits">Credits</h2>
<p>This notebook took inspiration from the <a href="https://aws.amazon.com/blogs/machine-learning/">AWS Machine Learning Blog</a> post when they announced the availability of <a href="https://stability.ai/blog/stable-diffusion-announcement">Stable Diffusion V1</a> and <a href="https://stability.ai/blog/stable-diffusion-v2-release">Stable Diffusion V2</a> models on <a href="https://aws.amazon.com/sagemaker/jumpstart/">SageMaker JumpStart</a>. You can find the original post here <a href="https://aws.amazon.com/blogs/machine-learning/generate-images-from-text-with-the-stable-diffusion-model-on-amazon-sagemaker-jumpstart/">Generate images from text with the stable diffusion model on Amazon SageMaker JumpStart</a>.</p>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<section id="what-is-amazon-sagemaker" class="level3">
<h3 class="anchored" data-anchor-id="what-is-amazon-sagemaker">What Is Amazon SageMaker?</h3>
<p><em>Amazon SageMaker is a fully managed machine learning service</em>. With SageMaker, data scientists and developers can quickly and easily build and train machine learning models, and then directly deploy them into a production-ready hosted environment. It provides an integrated Jupyter authoring notebook instance for easy access to your data sources for exploration and analysis, so you don’t have to manage servers. It also provides common machine learning algorithms that are optimized to run efficiently against extremely large data in a distributed environment. With native support for bring-your-own-algorithms and frameworks, SageMaker offers flexible distributed training options that adjust to your specific workflows. You can deploy a model into a secure and scalable environment by launching it with a few clicks from SageMaker Studio or the SageMaker console.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Amazon SageMaker</strong> introduction is taken from <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/whatis.html">SageMaker Developer Guide</a>. You may use <em>Developer Guide</em> for more details including <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/gs.html">Get Started with Amazon SageMaker</a>.</p>
</div>
</div>
</section>
<section id="what-is-sagemaker-jumpstart" class="level3">
<h3 class="anchored" data-anchor-id="what-is-sagemaker-jumpstart">What is SageMaker JumpStart?</h3>
<p><em>SageMaker JumpStart is the machine learning (ML) hub of SageMaker that provides hundreds of built-in algorithms, pre-trained models, and end-to-end solution templates to help you quickly get started with ML</em>. JumpStart also provides solution templates that set up infrastructure for common use cases, and executable example notebooks for machine learning with SageMaker.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>SageMaker JumpStart</strong> introduction is taken from <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-jumpstart.html">SageMaker JumpStart Developer Guide</a>. You may use <em>Developer Guide</em> for more details including <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/studio-jumpstart.html">Get Started</a> and one-click, end-to-end <a href="https://docs.aws.amazon.com/sagemaker/latest/dg/jumpstart-solutions.html">Solution Templates</a> for many common machine learning use cases.</p>
</div>
</div>
</section>
<section id="what-is-stable-diffusion" class="level3">
<h3 class="anchored" data-anchor-id="what-is-stable-diffusion">What is Stable Diffusion?</h3>
<p><em>Stable Diffusion is a text-to-image model that enables you to create photorealistic images from just a text prompt.</em> A diffusion model trains by learning to remove noise that was added to a real image. This de-noising process generates a realistic image. These models can also generate images from text alone by conditioning the generation process on the text. For instance, Stable Diffusion is a latent diffusion where the model learns to recognize shapes in a pure noise image and gradually brings these shapes into focus if the shapes match the words in the input text.</p>
<section id="how-does-jumpstart-simplify-it" class="level4">
<h4 class="anchored" data-anchor-id="how-does-jumpstart-simplify-it">How does JumpStart simplify it?</h4>
<p>Training, deploying, and running inference on large models such as Stable Diffusion is often challenging. It includes issues such as CUDA being out of memory, the payload size limit being exceeded, and so on. <em>JumpStart</em> simplifies this process by providing ready-to-use scripts that have been robustly tested. Furthermore, it provides guidance on each step of the process, including the recommended instance types, how to select parameters to guide the image generation process, prompt engineering, etc. Moreover, you can deploy and run inference on any of the 80+ Diffusion models from JumpStart without having to write any piece of your own code.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Stable Diffusion (SD) introduction is taken from <a href="https://github.com/aws/amazon-sagemaker-examples/blob/main/introduction_to_amazon_algorithms/jumpstart_text_to_image/Amazon_JumpStart_Text_To_Image.ipynb">Amazon JumpStart Text To Image</a> notebook. For a more in-depth discussion on SD architecture and working, I suggest reading <em>Jay Alammar</em> <a href="https://jalammar.github.io/illustrated-stable-diffusion/">The Illustrated Stable Diffusion</a> guide.</p>
</div>
</div>
</section>
</section>
</section>
<section id="environment" class="level2">
<h2 class="anchored" data-anchor-id="environment">Environment</h2>
<p>This notebook is created with <code>Amazon SageMaker Studio</code> running on <code>ml.t3.medium</code> instance with <code>Python 3 (Base Python 2.0)</code> kernel.</p>
<ul>
<li><strong>GitHub</strong>: <a href="https://github.com/hassaanbinaslam/myblog/blob/main/posts/2023-05-10-amazon-jumpstart-text2img-stablediffusion.ipynb">2023-05-10-amazon-jumpstart-text2img-stablediffusion.ipynb</a></li>
</ul>
<p><img src="images/2023-05-10-amazon-jumpstart-text2img-stablediffusion/notebook-env.png" class="img-fluid"></p>
<p>For model deployment and inference, I recommend using the <code>ml.p3.2xlarge</code> or <code>ml.g4dn.2xlarge</code> instance. I have relied on the <code>ml.p3.2xlarge</code> instance for this notebook. For generating multiple images per prompt, <code>ml.g4dn.2xlarge</code> can be slow, and you will get timeout errors as highlighted below.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>By default, both <code>ml.p3.2xlarge</code> and <code>ml.g4dn.2xlarge</code> may not be available in your AWS account. To get access, you need to generate a <code>Request quota increase</code> ticket from <em>Service Quotas &gt; AWS services &gt; Amazon SageMaker &gt; ml.p3.2xlarge for endpoint usage</em>. A service request may take up to 24 hours to get approved.</p>
</div>
</div>
<p><img src="images/2023-05-10-amazon-jumpstart-text2img-stablediffusion/invoke-endpoint-timeout.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p><strong>Why this timeout exception?</strong></p>
<p>You get an API endpoint when you deploy a model into production using Amazon SageMaker hosting services. Your client applications use this API to get inferences from the model hosted at the specified endpoint. There is a 60 seconds hard limit on these API endpoints.</p>
<p><em>A customer’s model containers must respond to requests within 60 seconds. The model itself can have a maximum processing time of 60 seconds before responding to invocations. If your model is going to take 50-60 seconds of processing time, the SDK socket timeout should be set to be 70 seconds.</em></p>
<p>To read more about it, refer to the documentation <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sagemaker-runtime/client/invoke_endpoint.html">SageMakerRuntime.Client.invoke_endpoint</a></p>
<p><strong>What to do when your model requires more than 60 seconds for inference?</strong></p>
<p>For such cases, AWS recommends using <em>Amazon SageMaker Asynchronous Inference</em>. This option is ideal for inferences with large payload sizes (up to 1GB) or long processing times (up to 15 minutes). To read more about it, use the following references.</p>
<ul>
<li><a href="https://hassaanbinaslam.github.io/">My blog post to run StableDiffusion inference on SageMaker in Async mode - COMING SOON!</a></li>
<li><a href="https://aws.amazon.com/about-aws/whats-new/2021/08/amazon-sagemaker-asynchronous-new-inference-option/">Amazon SageMaker Asynchronous Inference announcement</a></li>
<li><a href="https://docs.aws.amazon.com/sagemaker/latest/dg/async-inference.html">How does Asynchronous inference work?</a></li>
<li><a href="https://github.com/aws/sagemaker-python-sdk/issues/1119#issuecomment-904414810">GitHub Issue: Increasing the timeout for SageMaker InvokeEndpoint</a></li>
</ul>
</div>
</div>
</div>
</section>
<section id="set-up-the-environment" class="level2">
<h2 class="anchored" data-anchor-id="set-up-the-environment">Set up the environment</h2>
<p>There are some initial steps required to execute this notebook. They mainly involve installing the needed packages and initializing the SageMaker session.</p>
<div id="cell-6" class="cell" data-tags="[]" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="op">%%</span>capture</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">!</span>pip install <span class="op">--</span>upgrade sagemaker</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="op">!</span>pip install matplotlib</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="op">!</span>pip install watermark</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># 1. Get the latest version of SageMaker Python SDK. https://github.com/aws/sagemaker-python-sdk</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># 2. Install matplotlib. https://github.com/matplotlib/matplotlib</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># 3. Install watermark. An IPython magic extension for printing date and time stamps, version numbers, and hardware information. https://github.com/rasbt/watermark</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://github.com/rasbt/watermark">watermark</a> extension is a great utility to expose packages, kernel, and hardware information. Though this is optional, and you may skip this step, it is a great way to report execution environment information and make it more transparent.</p>
<div id="cell-8" class="cell" data-tags="[]" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="op">%</span>load_ext watermark</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># To load the watermark magic, execute the following line in your IPython notebook or current IPython shell</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># to learn more about the usage: https://github.com/rasbt/watermark/blob/master/docs/watermark.ipynb</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-tags="[]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">%</span>watermark <span class="op">-</span>v <span class="op">-</span>m <span class="op">-</span>p numpy,matplotlib,boto3,json,sagemaker</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"># watermark the notebook environment</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># watermark step is optional. This is done to make the environment details more transpaent</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Python implementation: CPython
Python version       : 3.8.12
IPython version      : 8.12.0

numpy     : 1.24.3
matplotlib: 3.7.1
boto3     : 1.26.111
json      : 2.0.9
sagemaker : 2.153.0

Compiler    : GCC 10.2.1 20210110
OS          : Linux
Release     : 4.14.311-233.529.amzn2.x86_64
Machine     : x86_64
Processor   : 
CPU cores   : 2
Architecture: 64bit
</code></pre>
</div>
</div>
<p>Next, we will initialize the SageMaker session. This session manages interactions with the Amazon SageMaker APIs and any other AWS services needed. It provides convenient methods for manipulating entities and resources that Amazon SageMaker uses, such as training jobs, endpoints, and input datasets in S3. AWS service calls are delegated to an underlying Boto3 session, which is initialized using the AWS configuration chain by default.</p>
<p>To read more about <em>SageMaker Session</em> refer to the documentation <a href="https://sagemaker.readthedocs.io/en/stable/api/utility/session.html#sagemaker.session.Session">sagemaker.session.Session</a></p>
<div id="cell-11" class="cell" data-tags="[]" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="im">import</span> sagemaker, boto3</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="im">from</span> sagemaker <span class="im">import</span> get_execution_role</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>aws_role <span class="op">=</span> get_execution_role()</span>
<span id="cb5-5"><a href="#cb5-5"></a>aws_region <span class="op">=</span> boto3.Session().region_name</span>
<span id="cb5-6"><a href="#cb5-6"></a>sagemaker_session <span class="op">=</span> sagemaker.Session()</span>
<span id="cb5-7"><a href="#cb5-7"></a></span>
<span id="cb5-8"><a href="#cb5-8"></a>aws_region</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>'us-east-1'</code></pre>
</div>
</div>
</section>
<section id="define-functions-to-deploy-models-and-get-inference-endpoints" class="level2">
<h2 class="anchored" data-anchor-id="define-functions-to-deploy-models-and-get-inference-endpoints">Define functions to deploy models and get inference endpoints</h2>
<p>In this section, we will define some functions that will make it easy for us to deploy JumpStart pre-trained models and get inference endpoints against them.</p>
<div id="cell-13" class="cell" data-tags="[]" data-execution_count="10">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="im">from</span> sagemaker <span class="im">import</span> image_uris, model_uris</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="im">from</span> sagemaker.model <span class="im">import</span> Model</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="im">from</span> sagemaker.predictor <span class="im">import</span> Predictor</span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="im">from</span> sagemaker.utils <span class="im">import</span> name_from_base</span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="kw">def</span> get_model_endpoint(model_id, sagemaker_session, instance_type<span class="op">=</span><span class="st">"ml.p3.2xlarge"</span>):</span>
<span id="cb7-8"><a href="#cb7-8"></a>    <span class="co">"""Deploy the model on the provided instance type are return the inference endpoint"""</span></span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a>    <span class="co"># Get the endpoint name from the provided 'model_id'</span></span>
<span id="cb7-11"><a href="#cb7-11"></a>    endpoint_name <span class="op">=</span> name_from_base(<span class="ss">f"jumpstart-example-</span><span class="sc">{</span>model_id<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-12"><a href="#cb7-12"></a></span>
<span id="cb7-13"><a href="#cb7-13"></a>    <span class="co"># recommended `inference_instance_type` are</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>    <span class="co"># "ml.g4dn.2xlarge"</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>    <span class="co"># "ml.g5.2xlarge"</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>    <span class="co"># "ml.p3.2xlarge"</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>    inference_instance_type <span class="op">=</span> instance_type</span>
<span id="cb7-18"><a href="#cb7-18"></a></span>
<span id="cb7-19"><a href="#cb7-19"></a>    <span class="co"># Retrieve the inference docker container uri.</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>    <span class="co"># This is the base HuggingFace container image for the default model above.</span></span>
<span id="cb7-21"><a href="#cb7-21"></a>    deploy_image_uri <span class="op">=</span> image_uris.retrieve(</span>
<span id="cb7-22"><a href="#cb7-22"></a>        region<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb7-23"><a href="#cb7-23"></a>        framework<span class="op">=</span><span class="va">None</span>,  <span class="co"># automatically inferred from model_id</span></span>
<span id="cb7-24"><a href="#cb7-24"></a>        image_scope<span class="op">=</span><span class="st">"inference"</span>,</span>
<span id="cb7-25"><a href="#cb7-25"></a>        model_id<span class="op">=</span>model_id,</span>
<span id="cb7-26"><a href="#cb7-26"></a>        model_version<span class="op">=</span><span class="st">"*"</span>,  <span class="co"># '*' means get the latest version</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>        instance_type<span class="op">=</span>inference_instance_type,</span>
<span id="cb7-28"><a href="#cb7-28"></a>    )</span>
<span id="cb7-29"><a href="#cb7-29"></a></span>
<span id="cb7-30"><a href="#cb7-30"></a>    <span class="co"># Retrieve the model uri. This includes the pre-trained model and parameters as well as the inference scripts.</span></span>
<span id="cb7-31"><a href="#cb7-31"></a>    <span class="co"># This includes all dependencies and scripts for model loading, inference handling etc..</span></span>
<span id="cb7-32"><a href="#cb7-32"></a>    model_uri <span class="op">=</span> model_uris.retrieve(</span>
<span id="cb7-33"><a href="#cb7-33"></a>        model_id<span class="op">=</span>model_id, model_version<span class="op">=</span><span class="st">"*"</span>, model_scope<span class="op">=</span><span class="st">"inference"</span></span>
<span id="cb7-34"><a href="#cb7-34"></a>    )</span>
<span id="cb7-35"><a href="#cb7-35"></a></span>
<span id="cb7-36"><a href="#cb7-36"></a>    <span class="co"># To increase the maximum response size from the endpoint.</span></span>
<span id="cb7-37"><a href="#cb7-37"></a>    <span class="co"># Response in our case will be generated images</span></span>
<span id="cb7-38"><a href="#cb7-38"></a>    env <span class="op">=</span> {</span>
<span id="cb7-39"><a href="#cb7-39"></a>        <span class="st">"MMS_MAX_RESPONSE_SIZE"</span>: <span class="st">"20000000"</span>,</span>
<span id="cb7-40"><a href="#cb7-40"></a>    }</span>
<span id="cb7-41"><a href="#cb7-41"></a></span>
<span id="cb7-42"><a href="#cb7-42"></a>    <span class="co"># Create the SageMaker model instance</span></span>
<span id="cb7-43"><a href="#cb7-43"></a>    model <span class="op">=</span> Model(</span>
<span id="cb7-44"><a href="#cb7-44"></a>        image_uri<span class="op">=</span>deploy_image_uri,</span>
<span id="cb7-45"><a href="#cb7-45"></a>        model_data<span class="op">=</span>model_uri,</span>
<span id="cb7-46"><a href="#cb7-46"></a>        role<span class="op">=</span>aws_role,</span>
<span id="cb7-47"><a href="#cb7-47"></a>        predictor_cls<span class="op">=</span>Predictor,</span>
<span id="cb7-48"><a href="#cb7-48"></a>        name<span class="op">=</span>endpoint_name,</span>
<span id="cb7-49"><a href="#cb7-49"></a>        env<span class="op">=</span>env,</span>
<span id="cb7-50"><a href="#cb7-50"></a>    )</span>
<span id="cb7-51"><a href="#cb7-51"></a></span>
<span id="cb7-52"><a href="#cb7-52"></a>    <span class="co"># Deploy the Model and return Inference endpoint. Note that we need to pass Predictor class when we deploy model through Model class,</span></span>
<span id="cb7-53"><a href="#cb7-53"></a>    <span class="co"># for being able to run inference through the sagemaker API.</span></span>
<span id="cb7-54"><a href="#cb7-54"></a>    <span class="cf">return</span> model.deploy(</span>
<span id="cb7-55"><a href="#cb7-55"></a>        initial_instance_count<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb7-56"><a href="#cb7-56"></a>        instance_type<span class="op">=</span>inference_instance_type,</span>
<span id="cb7-57"><a href="#cb7-57"></a>        predictor_cls<span class="op">=</span>Predictor,</span>
<span id="cb7-58"><a href="#cb7-58"></a>        endpoint_name<span class="op">=</span>endpoint_name,</span>
<span id="cb7-59"><a href="#cb7-59"></a>        sagemaker_session<span class="op">=</span>sagemaker_session,</span>
<span id="cb7-60"><a href="#cb7-60"></a>    )</span>
<span id="cb7-61"><a href="#cb7-61"></a></span>
<span id="cb7-62"><a href="#cb7-62"></a></span>
<span id="cb7-63"><a href="#cb7-63"></a><span class="kw">def</span> remove_model_endpoint(model_predictor):</span>
<span id="cb7-64"><a href="#cb7-64"></a>    <span class="co">"""Remove the model and deployed inference endpoint"""</span></span>
<span id="cb7-65"><a href="#cb7-65"></a>    model_predictor.delete_model()</span>
<span id="cb7-66"><a href="#cb7-66"></a>    model_predictor.delete_endpoint()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="define-functions-to-query-endpoints-and-display-results" class="level2">
<h2 class="anchored" data-anchor-id="define-functions-to-query-endpoints-and-display-results">Define functions to query endpoints and display results</h2>
<p>In the next section, we will define some functions that we will use to query the inference endpoint and display the results.</p>
<div id="cell-15" class="cell" data-tags="[]" data-execution_count="23">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="im">from</span> io <span class="im">import</span> BytesIO</span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="im">import</span> base64</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="im">import</span> json</span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="im">import</span> re</span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="im">import</span> os</span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co"># Define a path to save the generated images</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>image_path <span class="op">=</span> <span class="st">"./images/2023-05-10-amazon-jumpstart-text2img-stablediffusion/generated/"</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>os.makedirs(image_path, exist_ok<span class="op">=</span><span class="va">True</span>) <span class="co"># create folder if not present</span></span>
<span id="cb8-13"><a href="#cb8-13"></a></span>
<span id="cb8-14"><a href="#cb8-14"></a></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="kw">def</span> display_and_save_img(image, filename):</span>
<span id="cb8-16"><a href="#cb8-16"></a>    <span class="co">"""Display and save the hallucinated image."""</span></span>
<span id="cb8-17"><a href="#cb8-17"></a></span>
<span id="cb8-18"><a href="#cb8-18"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">7</span>), frameon<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb8-19"><a href="#cb8-19"></a>    plt.imshow(np.array(image))</span>
<span id="cb8-20"><a href="#cb8-20"></a>    plt.axis(<span class="st">"off"</span>)</span>
<span id="cb8-21"><a href="#cb8-21"></a>    plt.savefig(</span>
<span id="cb8-22"><a href="#cb8-22"></a>        image_path <span class="op">+</span> filename, bbox_inches<span class="op">=</span><span class="st">"tight"</span>, transparent<span class="op">=</span><span class="va">True</span>, pad_inches<span class="op">=</span><span class="dv">0</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>    )  <span class="co"># comment it to NOT save generated images</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>    plt.show()</span>
<span id="cb8-25"><a href="#cb8-25"></a></span>
<span id="cb8-26"><a href="#cb8-26"></a></span>
<span id="cb8-27"><a href="#cb8-27"></a><span class="kw">def</span> query_endpoint_with_json_payload(model_predictor, payload, content_type, accept):</span>
<span id="cb8-28"><a href="#cb8-28"></a>    <span class="co">"""Query the model predictor with json payload."""</span></span>
<span id="cb8-29"><a href="#cb8-29"></a></span>
<span id="cb8-30"><a href="#cb8-30"></a>    encoded_payload <span class="op">=</span> json.dumps(payload).encode(<span class="st">"utf-8"</span>)</span>
<span id="cb8-31"><a href="#cb8-31"></a></span>
<span id="cb8-32"><a href="#cb8-32"></a>    query_response <span class="op">=</span> model_predictor.predict(</span>
<span id="cb8-33"><a href="#cb8-33"></a>        encoded_payload, {<span class="st">"ContentType"</span>: content_type, <span class="st">"Accept"</span>: accept,},</span>
<span id="cb8-34"><a href="#cb8-34"></a>    )</span>
<span id="cb8-35"><a href="#cb8-35"></a>    <span class="cf">return</span> query_response</span>
<span id="cb8-36"><a href="#cb8-36"></a></span>
<span id="cb8-37"><a href="#cb8-37"></a></span>
<span id="cb8-38"><a href="#cb8-38"></a><span class="kw">def</span> display_encoded_images(generated_images, prompt):</span>
<span id="cb8-39"><a href="#cb8-39"></a>    <span class="co">"""Decode the images and convert to RGB format and display</span></span>
<span id="cb8-40"><a href="#cb8-40"></a></span>
<span id="cb8-41"><a href="#cb8-41"></a><span class="co">    Args:</span></span>
<span id="cb8-42"><a href="#cb8-42"></a><span class="co">    generated_images: are a list of jpeg images as bytes with b64 encoding.</span></span>
<span id="cb8-43"><a href="#cb8-43"></a><span class="co">    prompt: text string used to generate the images</span></span>
<span id="cb8-44"><a href="#cb8-44"></a><span class="co">    """</span></span>
<span id="cb8-45"><a href="#cb8-45"></a></span>
<span id="cb8-46"><a href="#cb8-46"></a>    <span class="cf">for</span> count, generated_image <span class="kw">in</span> <span class="bu">enumerate</span>(generated_images):</span>
<span id="cb8-47"><a href="#cb8-47"></a>        generated_image_decoded <span class="op">=</span> BytesIO(base64.b64decode(generated_image.encode()))</span>
<span id="cb8-48"><a href="#cb8-48"></a>        generated_image_rgb <span class="op">=</span> Image.<span class="bu">open</span>(generated_image_decoded).convert(<span class="st">"RGB"</span>)</span>
<span id="cb8-49"><a href="#cb8-49"></a></span>
<span id="cb8-50"><a href="#cb8-50"></a>        <span class="co"># prepare filename to store the image from the prompt </span></span>
<span id="cb8-51"><a href="#cb8-51"></a>        temp <span class="op">=</span> re.sub(</span>
<span id="cb8-52"><a href="#cb8-52"></a>            <span class="vs">r"</span><span class="pp">[^a-zA-Z0-9</span><span class="dv">\s</span><span class="pp">]</span><span class="op">+</span><span class="vs">"</span>, <span class="st">""</span>, prompt</span>
<span id="cb8-53"><a href="#cb8-53"></a>        )  <span class="co"># remove special chars from prompt</span></span>
<span id="cb8-54"><a href="#cb8-54"></a></span>
<span id="cb8-55"><a href="#cb8-55"></a>        temp <span class="op">=</span> temp.replace(<span class="st">" "</span>, <span class="st">"-"</span>)  <span class="co"># turn spaces to '-'</span></span>
<span id="cb8-56"><a href="#cb8-56"></a>        temp <span class="op">=</span> temp[:<span class="dv">50</span>]  <span class="co"># limit the lenght of string upto 100 chars</span></span>
<span id="cb8-57"><a href="#cb8-57"></a>        </span>
<span id="cb8-58"><a href="#cb8-58"></a>        filename <span class="op">=</span> (</span>
<span id="cb8-59"><a href="#cb8-59"></a>            temp <span class="op">+</span> <span class="bu">str</span>(count) <span class="op">+</span> <span class="st">".jpg"</span></span>
<span id="cb8-60"><a href="#cb8-60"></a>        )  <span class="co"># add count and extension to the image name</span></span>
<span id="cb8-61"><a href="#cb8-61"></a></span>
<span id="cb8-62"><a href="#cb8-62"></a>        <span class="co"># display the generated image</span></span>
<span id="cb8-63"><a href="#cb8-63"></a>        display_and_save_img(generated_image_rgb, filename)</span>
<span id="cb8-64"><a href="#cb8-64"></a></span>
<span id="cb8-65"><a href="#cb8-65"></a></span>
<span id="cb8-66"><a href="#cb8-66"></a><span class="kw">def</span> parse_response_multiple_images(query_response):</span>
<span id="cb8-67"><a href="#cb8-67"></a>    <span class="co">"""Parse response and return generated image and the prompt"""</span></span>
<span id="cb8-68"><a href="#cb8-68"></a></span>
<span id="cb8-69"><a href="#cb8-69"></a>    response_dict <span class="op">=</span> json.loads(query_response)</span>
<span id="cb8-70"><a href="#cb8-70"></a>    <span class="cf">return</span> response_dict[<span class="st">"generated_images"</span>], response_dict[<span class="st">"prompt"</span>]</span>
<span id="cb8-71"><a href="#cb8-71"></a></span>
<span id="cb8-72"><a href="#cb8-72"></a></span>
<span id="cb8-73"><a href="#cb8-73"></a><span class="kw">def</span> query_model_and_display(payload, model_predictor):</span>
<span id="cb8-74"><a href="#cb8-74"></a>    query_response <span class="op">=</span> query_endpoint_with_json_payload(</span>
<span id="cb8-75"><a href="#cb8-75"></a>        model_predictor, payload, <span class="st">"application/json"</span>, <span class="st">"application/json;jpeg"</span></span>
<span id="cb8-76"><a href="#cb8-76"></a>    )</span>
<span id="cb8-77"><a href="#cb8-77"></a>    generated_images, prompt <span class="op">=</span> parse_response_multiple_images(query_response)</span>
<span id="cb8-78"><a href="#cb8-78"></a></span>
<span id="cb8-79"><a href="#cb8-79"></a>    display_encoded_images(generated_images, prompt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="supported-inference-parameters" class="level3">
<h3 class="anchored" data-anchor-id="supported-inference-parameters">Supported Inference parameters</h3>
<p>We have to pass along some advanced parameters in the request to get inferences from the model API. These include</p>
<ul>
<li><code>prompt</code>: prompt to guide the image generation. It must be specified and can be a string or a list of strings.</li>
<li><code>width</code>: width of the generated image. If specified, it must be a positive integer divisible by 8.</li>
<li><code>height</code>: height of the generated image. If specified, it must be a positive integer divisible by 8.</li>
<li><code>num_inference_steps</code>: Number of denoising steps during image generation. More steps lead to a higher-quality image. If specified, it must be a positive integer.</li>
<li><code>guidance_scale</code>: Higher guidance scale results in an image closely related to the prompt at the expense of image quality. If specified, it must be a float. guidance_scale&lt;=1 is ignored.</li>
<li><code>negative_prompt</code>: guide image generation against this prompt. If specified, it must be a string or a list of strings used with guidance_scale. If guidance_scale is disabled, this is also disabled. Moreover, if a prompt is a list of strings, then negative_prompt must also be a list of strings.</li>
<li><code>num_images_per_prompt</code>: number of images returned per prompt. If specified, it must be a positive integer.</li>
<li><code>seed</code>: Fix the randomized state for reproducibility. If specified, it must be an integer.</li>
</ul>
<p>An example request payload is provided below. The effect of these parameters will become apparent when we generate images using them.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a>payload <span class="op">=</span> {</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="st">"prompt"</span>: <span class="st">"a portrait of a man"</span>,</span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="st">"negative_prompt"</span>: <span class="st">"beard"</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">1</span>,</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb9-9"><a href="#cb9-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb9-10"><a href="#cb9-10"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<ul>
<li><code>prompt and negative_prompt</code>: Stable Diffusion models are not good at understanding negative words ‘without’, ‘except’, ‘exclude’, ‘not’ etc in the prompt statement. For example, the prompt “a portrait of a man without a beard” may still generate an image of a man with a beard. However, including “negative_promt” with the word “beard” has much more influence on the model.</li>
<li><code>height and width</code>: The model often performs best when the generated image has dimensions similar to the training data dimension used for model training. It is recommended to read about the model to get the correct dimensions.</li>
<li><code>num_images_per_prompt</code>: From experience, a number between 1 and 5 works best for real-time inference endpoint.</li>
<li><code>num_inference_steps</code>: When experimenting with prompts, I tend to keep the “inference_steps” under 50. At 20, you will get a black-and-white image but get some idea of the image being produced. If I find an output with fine patterns, I try higher <em>inference_steps</em> between 100 and 150 to improve the quality further.</li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="select-sagemaker-pre-trained-diffusion-model-and-prompt-engineering" class="level2">
<h2 class="anchored" data-anchor-id="select-sagemaker-pre-trained-diffusion-model-and-prompt-engineering">Select SageMaker pre-trained Diffusion model and Prompt Engineering</h2>
<section id="model-selection" class="level3">
<h3 class="anchored" data-anchor-id="model-selection">Model selection</h3>
<p>SageMaker JumpStart provides many pre-trained models. Use the following link to search and select the correct <em>Model ID</em>. <a href="https://sagemaker.readthedocs.io/en/stable/doc_utils/pretrainedmodels.html">Built-in Algorithms with pre-trained Model Table</a>. We are only interested in <em>text-to-image</em> models, and we can filter them using <code>txt2img</code> string in the search bar.</p>
<p><img src="images/2023-05-10-amazon-jumpstart-text2img-stablediffusion/pretrained-model-table.png" class="img-fluid"></p>
<p>At the time of writing this notebook, 86 <code>txt2img</code> models are available on JumpStart. We may use any of them to generate the images. I have selected a few from them that are the more well-known. However, you are welcome to experiment with anyone of them. Following in the list of the models that we will use in the later part of this notebook.</p>
<ul>
<li><a href="https://huggingface.co/stabilityai/stable-diffusion-2-1">model-txt2img-stabilityai-stable-diffusion-v2-1-base</a></li>
<li><a href="https://huggingface.co/prompthero/openjourney">huggingface-txt2img-prompthero-openjourney</a></li>
<li><a href="https://huggingface.co/andite/anything-v4.0">huggingface-txt2img-andite-anything-v4-0</a> <!-- * [huggingface-txt2img-dreamlike-art-dreamlike-diffusion-1-0](https://huggingface.co/dreamlike-art/dreamlike-diffusion-1.0) --></li>
<li><a href="https://huggingface.co/nitrosocke/mo-di-diffusion">huggingface-txt2img-nitrosocke-mo-di-diffusion</a></li>
<li><a href="https://huggingface.co/Envvi/Inkpunk-Diffusion">huggingface-txt2img-envvi-inkpunk-diffusion</a></li>
</ul>
</section>
<section id="prompt-engineering" class="level3">
<h3 class="anchored" data-anchor-id="prompt-engineering">Prompt engineering</h3>
<p>Writing a good prompt can be an art. Predicting whether a particular prompt will yield a satisfactory image with a given model is often difficult. However, specific templates have been observed to work. Broadly, a prompt can be roughly broken down into three pieces:</p>
<ol type="1">
<li>Type of image (photograph/sketch/painting, etc.)</li>
<li>Description (subject/object/environment/scene, etc.)</li>
<li>The style of the image (realistic/artistic/type of art, etc.)</li>
</ol>
<p>You can change each of the three parts individually to generate variations of an image. <em>Adjectives</em> have been known to play a significant role in the image-generation process. Also, adding more details about the scene helps in the generation process. Here are some suggestions that you may follow to generate good prompts.</p>
<ul>
<li>To generate a realistic image, you can use phrases such as “a photo of,” “a photograph of,” “realistic,” or “hyper-realistic.”</li>
<li>To generate images by artists, you can use phrases like “by Pablo Picasso,” “oil painting by Rembrandt,” “landscape art by Frederic Edwin Church,” or “pencil drawing by Albrecht Dürer.”</li>
<li>You can combine different artists as well. For example, to generate artistic images by category, you can add the art category in the prompt such as “lion on a beach, abstract.”</li>
<li>Some other types include “oil painting,” “pencil drawing, “pop art,” “digital art,” “anime,” “cartoon,” “futurism,” “watercolor,” “manga,” etc.</li>
<li>You can also include details such as lighting or camera lenses such as 35mm wide lens or 85mm wide lens, and information on the framing (portrait/landscape/close up, etc.).</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>The above concise prompt engineering outline is taken from <a href="https://aws.amazon.com/blogs/machine-learning/generate-images-from-text-with-the-stable-diffusion-model-on-amazon-sagemaker-jumpstart/">AWS Blog Post</a>. For a more in-depth discussion and techniques to write good prompts, you may consult below resources.</p>
<ul>
<li><a href="https://stable-diffusion-art.com/prompt-guide/">Stable Diffusion Art: a definitive prompt guide</a>. An excellent beginner-level guide.</li>
<li><a href="https://thenaturehero.com/stable-diffusion-negative-prompt-list/">Best Stable Diffusion Negative Prompt List To Use</a>. It highlights techniques to improve results by using negative prompts.</li>
<li><a href="https://openart.ai/promptbook">OpenArt.ai Prompt Book</a>. A very detailed guide covering many techniques and areas.</li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="stable-diffusion-v2-1" class="level2">
<h2 class="anchored" data-anchor-id="stable-diffusion-v2-1">Stable Diffusion v2-1</h2>
<p>Let’s get our first model up and running <a href="https://huggingface.co/stabilityai/stable-diffusion-2-1">stable-diffusion-2-1</a>.</p>
<div id="cell-19" class="cell" data-tags="[]" data-execution_count="26">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a>model_id <span class="op">=</span> <span class="st">"model-txt2img-stabilityai-stable-diffusion-v2-1-base"</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>model_predictor <span class="op">=</span> get_model_endpoint(model_id, sagemaker_session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>---------!</code></pre>
</div>
</div>
<p>This base model is trained from scratch and can be applied to various use cases. However, to use this model, it is also important to understand some of the limitations.</p>
<ul>
<li>The model does not achieve perfect photorealism</li>
<li>The model cannot render legible text</li>
<li>The model does not perform well on more difficult tasks which involve compositionality, such as rendering an image corresponding to “A red cube on top of a blue sphere”</li>
<li>Faces and people in general may not be generated properly</li>
<li>The model was trained mainly with English captions and will not work as well in other languages</li>
</ul>
<section id="realistic-people" class="level3">
<h3 class="anchored" data-anchor-id="realistic-people">Realistic people</h3>
<p>Let’s see how good is this model to generate real people images.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores</p>
<p>Negative = disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&amp;w</p>
</div>
</div>
<div id="cell-21" class="cell" data-tags="[]" data-execution_count="27">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>prompt <span class="op">=</span> <span class="st">"photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores"</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>negative_prompt <span class="op">=</span> <span class="st">"disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&amp;w"</span></span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>payload <span class="op">=</span> {</span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb12-6"><a href="#cb12-6"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb12-7"><a href="#cb12-7"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">5</span>,</span>
<span id="cb12-10"><a href="#cb12-10"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb12-13"><a href="#cb12-13"></a>}</span>
<span id="cb12-14"><a href="#cb12-14"></a></span>
<span id="cb12-15"><a href="#cb12-15"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-9-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-9-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-9-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-9-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The model can generate images of faces with good symmetry but still struggles with hands and fingers. This is visible in images 3 and 5, where the fingers are distorted. Otherwise, it was able to capture the instructions from the prompt.</p>
<ul>
<li>photo of a young woman</li>
<li>highlight hair</li>
<li>sitting outside the restaurant</li>
<li>wearing dress</li>
</ul>
<p>Let’s try another prompt; this time, we will focus more on the body shape, parts, and aesthetics.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = sitting on green grass, bodybuilder posing, bodycam footage, man esthete with disgust face, overlooking a dark street, black and white photograph, sitting on a bench, dirty concrete wall, very sexy outfit, perfect face mode, sport photography, black business suit</p>
<p>Negative = disfigured, ugly, bad</p>
</div>
</div>
<p>The results could be better, again highlighting that the Stable Diffusion v2.1 model still needs to improve at generating proper people faces and shapes.</p>
<div id="cell-23" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1"></a>prompt <span class="op">=</span> <span class="st">"sitting on green grass, bodybuilder posing, bodycam footage, man esthete with disgust face, overlooking a dark street, black and white photograph, sitting on a bench, dirty concrete wall, very sexy outfit, perfect face mode, sport photography, black business suit"</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>negative_prompt <span class="op">=</span> <span class="st">"disfigured, ugly, bad"</span></span>
<span id="cb13-3"><a href="#cb13-3"></a></span>
<span id="cb13-4"><a href="#cb13-4"></a>payload <span class="op">=</span> {</span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">5</span>,</span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb13-11"><a href="#cb13-11"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb13-13"><a href="#cb13-13"></a>}</span>
<span id="cb13-14"><a href="#cb13-14"></a></span>
<span id="cb13-15"><a href="#cb13-15"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-10-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-10-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-10-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-10-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="architecture" class="level3">
<h3 class="anchored" data-anchor-id="architecture">Architecture</h3>
<p>Okay, we have seen that model struggles with depicting accurate body shapes. So let’s try something more complex and see how well the model understands building shapes and architectures.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k</p>
</div>
</div>
<div id="cell-25" class="cell" data-tags="[]" data-execution_count="28">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a>prompt <span class="op">=</span> <span class="st">"A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k"</span></span>
<span id="cb14-2"><a href="#cb14-2"></a></span>
<span id="cb14-3"><a href="#cb14-3"></a>payload <span class="op">=</span> {</span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb14-5"><a href="#cb14-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb14-7"><a href="#cb14-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">5</span>,</span>
<span id="cb14-8"><a href="#cb14-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb14-11"><a href="#cb14-11"></a>}</span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-11-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-11-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-11-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-11-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>These are very impressive results. The model is adept at understanding how modern buildings should look like. It can intelligently place windows, balconies, chairs, trees, shadows, and even reflections at appropriate locations. The design is also modern, meaning it follows the instructions well.</p>
<p>Let’s try another difficult prompt focusing on a city’s complex geometry and formations.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>A beautiful digital illustration of BARCELONA, 4k, crystal clear, ultra HD, high definition, detailed, trending in artstation, fantasy</p>
</div>
</div>
<div id="cell-27" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1"></a>prompt <span class="op">=</span> <span class="st">"A beautiful digital illustration of BARCELONA, 4k, crystal clear, ultra HD, high definition, detailed, trending in artstation, fantasy"</span></span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a>payload <span class="op">=</span> {</span>
<span id="cb15-4"><a href="#cb15-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb15-6"><a href="#cb15-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb15-7"><a href="#cb15-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb15-8"><a href="#cb15-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb15-9"><a href="#cb15-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb15-10"><a href="#cb15-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb15-11"><a href="#cb15-11"></a>}</span>
<span id="cb15-12"><a href="#cb15-12"></a></span>
<span id="cb15-13"><a href="#cb15-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-12-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-12-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The results are pretty good. The model can understand that structures at the front are expansive, and those at the far back slowly decreases in size. It also understands that roads run through and divides a typical city layout. The last image is impressive, containing a green belt having trees in the center. After that, there is a road busy with vehicles. And then, at the peripheries, there are building with intricate layouts.</p>
</section>
<section id="abstract-art-and-styles" class="level3">
<h3 class="anchored" data-anchor-id="abstract-art-and-styles">Abstract art and styles</h3>
<p>Let’s move to abstract art, styles, and artists and see how well the model portrays them.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>A surreal 3D render of a cityscape with twisted buildings, upside-down structures, and floating objects, creating a dreamlike and disorienting atmosphere, by Simon Stålenhag</p>
</div>
</div>
<div id="cell-29" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>prompt <span class="op">=</span> <span class="st">"A surreal 3D render of a cityscape with twisted buildings, upside-down structures, and floating objects, creating a dreamlike and disorienting atmosphere, by Simon Stålenhag"</span></span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a>payload <span class="op">=</span> {</span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb16-6"><a href="#cb16-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">5</span>,</span>
<span id="cb16-8"><a href="#cb16-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb16-11"><a href="#cb16-11"></a>}</span>
<span id="cb16-12"><a href="#cb16-12"></a></span>
<span id="cb16-13"><a href="#cb16-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-13-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-13-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-13-output-4.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-13-output-5.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>“Twisted upside-down buildings and floating objects” is very unusual, and hard to imagine what such a world would look like. But it is not difficult for the model to produce it. So let’s try some more prompts.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>A futuristic space station orbiting a distant planet, with a sleek design and advanced technology visible through the windows, Nuremberg Chronicle, 1493, Liber Chronicarum, Michael Wolgemut, detailed architecture</p>
</div>
</div>
<div id="cell-31" class="cell" data-tags="[]" data-execution_count="46">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1"></a>prompt <span class="op">=</span> <span class="st">"A futuristic space station orbiting a distant planet, with sleek design and advanced technology visible through the windows, Nuremberg Chronicle, 1493, Liber Chronicarum, Michael Wolgemut, detailed archtitecture"</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>negative_prompt <span class="op">=</span> <span class="st">"writings, ugly, bad, immature, anime, b&amp;w, lines, latin"</span></span>
<span id="cb17-3"><a href="#cb17-3"></a></span>
<span id="cb17-4"><a href="#cb17-4"></a>payload <span class="op">=</span> {</span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb17-6"><a href="#cb17-6"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb17-8"><a href="#cb17-8"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb17-9"><a href="#cb17-9"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb17-10"><a href="#cb17-10"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb17-11"><a href="#cb17-11"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb17-12"><a href="#cb17-12"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb17-13"><a href="#cb17-13"></a>}</span>
<span id="cb17-14"><a href="#cb17-14"></a></span>
<span id="cb17-15"><a href="#cb17-15"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-14-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-14-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Realistic 3D render of an isometric hospital in a low poly art style, medical workers, doctors, nurses, patients, beds and equipment.</p>
</div>
</div>
<div id="cell-33" class="cell" data-tags="[]" data-execution_count="45">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>prompt <span class="op">=</span> <span class="st">"Realistic 3D render of an isometric hospital in a low poly art style, medical workers, doctors, nurses, patients, beds and equipment."</span></span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a>payload <span class="op">=</span> {</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb18-7"><a href="#cb18-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb18-8"><a href="#cb18-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb18-9"><a href="#cb18-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb18-11"><a href="#cb18-11"></a>}</span>
<span id="cb18-12"><a href="#cb18-12"></a></span>
<span id="cb18-13"><a href="#cb18-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-15-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-15-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="landscapes" class="level3">
<h3 class="anchored" data-anchor-id="landscapes">Landscapes</h3>
<p>Let’s move to a more natural setting. The model can generate beautiful scenes involving meadows, wildlands, mountains, rivers, etc. The depth and details in the results are remarkable. Some prompts that I tried are provided here.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>The green idyllic Arcadian prairie with sheep by Thomas Cole, Breath-taking digital painting with placid colors, amazing art, artstation 3, cottagecore.</p>
</div>
</div>
<div id="cell-35" class="cell" data-tags="[]" data-execution_count="41">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>prompt <span class="op">=</span> <span class="st">"The green idyllic Arcadian prairie with sheep by Thomas Cole, Breath-taking digital painting with placid colors, amazing art, artstation 3, cottagecore."</span></span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>payload <span class="op">=</span> {</span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb19-5"><a href="#cb19-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb19-6"><a href="#cb19-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb19-7"><a href="#cb19-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb19-8"><a href="#cb19-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb19-11"><a href="#cb19-11"></a>}</span>
<span id="cb19-12"><a href="#cb19-12"></a></span>
<span id="cb19-13"><a href="#cb19-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-16-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-16-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="prompt-8" class="level4">
<h4 class="anchored" data-anchor-id="prompt-8">Prompt</h4>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ, full view</p>
</div>
</div>
<div id="cell-37" class="cell" data-tags="[]" data-execution_count="42">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1"></a>prompt <span class="op">=</span> <span class="st">"A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ, full view"</span></span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a>payload <span class="op">=</span> {</span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb20-8"><a href="#cb20-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb20-10"><a href="#cb20-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb20-11"><a href="#cb20-11"></a>}</span>
<span id="cb20-12"><a href="#cb20-12"></a></span>
<span id="cb20-13"><a href="#cb20-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-17-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-17-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-17-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="portraits-and-paintings" class="level3">
<h3 class="anchored" data-anchor-id="portraits-and-paintings">Portraits and paintings</h3>
<p>I also tried generating portraits and paintings of imaginative scenarios. Stable Diffusion is again very good at it. But similar to its limitations in creating accurate human body shapes, it struggles with them in paintings.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = A painting of a pirate ship in the ocean, a digital painting, renaissance, color study, portrait, castle, three masts, davinci, whole page illustration, small boat</p>
<p>Negative = logos, icons, writings, description</p>
</div>
</div>
<div id="cell-39" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>prompt <span class="op">=</span> <span class="st">"A painting of a pirate ship in the ocean, a digital painting, renaissance, color study, portrait, castle, three masts, davinci, whole page illustration, small boat"</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>negative_prompt <span class="op">=</span> <span class="st">"logos, icons, writings, description"</span></span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a>payload <span class="op">=</span> {</span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb21-8"><a href="#cb21-8"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb21-9"><a href="#cb21-9"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb21-10"><a href="#cb21-10"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">50</span>,</span>
<span id="cb21-11"><a href="#cb21-11"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb21-12"><a href="#cb21-12"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb21-13"><a href="#cb21-13"></a>}</span>
<span id="cb21-14"><a href="#cb21-14"></a></span>
<span id="cb21-15"><a href="#cb21-15"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-18-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-18-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Complex detailed medieval painting of a fantasy medieval cleric woman walking through a field of flowers, cleric wearing a tiara and a ornate embroidered hooded cloak, bright blue eyes, sharp focus, close shot, long blonde hair, high contrast, low saturation, lush flower field and clouds background, backlighting</p>
</div>
</div>
<div id="cell-41" class="cell" data-tags="[]" data-execution_count="48">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>prompt <span class="op">=</span> <span class="st">"Complex detailed medieval painting of a fantasy medieval cleric woman walking through a field of flowers, cleric wearing a tiara and a ornate embroidered hooded cloak, bright blue eyes, sharp focus, close shot, long blonde hair, high contrast, low saturation, lush flower field and clouds background, backlighting"</span></span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a>payload <span class="op">=</span> {</span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb22-5"><a href="#cb22-5"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb22-6"><a href="#cb22-6"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb22-8"><a href="#cb22-8"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb22-10"><a href="#cb22-10"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb22-11"><a href="#cb22-11"></a>}</span>
<span id="cb22-12"><a href="#cb22-12"></a></span>
<span id="cb22-13"><a href="#cb22-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-19-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-19-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Please delete the model endpoint once it is no longer required to avoid unforeseen costs.</p>
<div id="cell-43" class="cell" data-tags="[]" data-execution_count="49">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a>remove_model_endpoint(model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>If your notebook kernel has crashed, manually delete the model endpoint by going to <em>SageMaker &gt; Inference &gt; Endpoints</em>. Make sure that you are in the right region in the <em>Management Console</em>. <img src="images/2023-05-10-amazon-jumpstart-text2img-stablediffusion/sagemaker-endpoint.png" class="img-fluid"></p>
</div>
</div>
</div>
</section>
</section>
<section id="prompthero-openjourney" class="level2">
<h2 class="anchored" data-anchor-id="prompthero-openjourney">PromptHero Openjourney</h2>
<p>Besides the Stable Diffusion base models, people have also released models with unique styles and tastes. One such model is <a href="https://huggingface.co/prompthero/openjourney">OpenJourney</a>. Openjourney is based on <a href="https://huggingface.co/runwayml/stable-diffusion-v1-5">Stable Diffusion v1.5</a> but fine-tuned with many <a href="https://en.wikipedia.org/wiki/Midjourney">Midjourney</a> images. The result is a model capable of generating very detailed and colorful photos. But to invoke the model’s unique style, we must append the prompt with the text <code>modern-v4 style</code>.</p>
<p>Let’s get this model up and running.</p>
<div id="cell-46" class="cell" data-tags="[]" data-execution_count="50">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a>model_id <span class="op">=</span> <span class="st">"huggingface-txt2img-prompthero-openjourney"</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>model_predictor <span class="op">=</span> get_model_endpoint(model_id, sagemaker_session) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>---------!</code></pre>
</div>
</div>
<section id="realistic-people-and-portraits" class="level3">
<h3 class="anchored" data-anchor-id="realistic-people-and-portraits">Realistic people and portraits</h3>
<p>Remember that this OpenJourney model is based on an older version of stable diffusion, but I found it equally good at generating faces and body shapes with acceptable symmetry.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = mdjrny-v4 style old, female robot, metal, rust, wisible wires, destroyed, sad, dark, dirty, looking at viewer, portrait, photography, detailed skin, realistic, photo-realistic, 8k, highly detailed, full length frame, High detail RAW color art, piercing, diffused soft lighting, shallow depth of field, sharp focus, hyperrealism, cinematic lighting</p>
<p>Negative = logo, CGI, 3d, lowres, text, error, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, out of frame, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, username, watermark, signature</p>
</div>
</div>
<div id="cell-48" class="cell" data-tags="[]" data-execution_count="52">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style old, female robot, metal, rust, wisible wires, destroyed, sad, dark, dirty, looking at viewer, portrait, photography, detailed skin, realistic, photo-realistic, 8k, highly detailed, full length frame, High detail RAW color art, piercing, diffused soft lighting, shallow depth of field, sharp focus, hyperrealism, cinematic lighting"</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>negative_prompt <span class="op">=</span> <span class="st">"logo, CGI, 3d, lowres, text, error, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, out of frame, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, username, watermark, signature"</span></span>
<span id="cb26-3"><a href="#cb26-3"></a></span>
<span id="cb26-4"><a href="#cb26-4"></a>payload <span class="op">=</span> {</span>
<span id="cb26-5"><a href="#cb26-5"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb26-6"><a href="#cb26-6"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb26-7"><a href="#cb26-7"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb26-8"><a href="#cb26-8"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb26-9"><a href="#cb26-9"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb26-10"><a href="#cb26-10"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb26-11"><a href="#cb26-11"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb26-12"><a href="#cb26-12"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb26-13"><a href="#cb26-13"></a>}</span>
<span id="cb26-14"><a href="#cb26-14"></a></span>
<span id="cb26-15"><a href="#cb26-15"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb26-16"><a href="#cb26-16"></a><span class="co"># https://prompthero.com/prompt/4c1a987fec7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-22-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-22-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-22-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = mdjrny-v4 style portrait photograph of Madison Beer as Pocahontas, young beautiful native american woman, perfect symmetrical face, feather jewelry, traditional handmade dress, armed female hunter warrior, wild west environment, Utah landscape, ultra realistic, concept art, elegant, intricate, highly detailed, depth of field, professionally color graded, 8k, art by artgerm and greg rutkowski and alphonse mucha</p>
<p>Negative = backlight, dark face, white fur, gold fabric, cropped head, out of frame, deformed, cripple, ugly, additional arms, additional legs, additional head, two heads, multiple people, group of people</p>
</div>
</div>
<div id="cell-50" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style portrait photograph of Madison Beer as Pocahontas, young beautiful native american woman, perfect symmetrical face, feather jewelry, traditional handmade dress, armed female hunter warrior, wild west environment, Utah landscape, ultra realistic, concept art, elegant, intricate, highly detailed, depth of field, professionally color graded, 8k, art by artgerm and greg rutkowski and alphonse mucha"</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>negative_prompt <span class="op">=</span> <span class="st">"backlight, dark face, white fur, gold fabric, cropped head, out of frame, deformed, cripple, ugly, additional arms, additional legs, additional head, two heads, multiple people, group of people"</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>payload <span class="op">=</span> {</span>
<span id="cb27-4"><a href="#cb27-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb27-6"><a href="#cb27-6"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb27-7"><a href="#cb27-7"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb27-8"><a href="#cb27-8"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb27-9"><a href="#cb27-9"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb27-10"><a href="#cb27-10"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb27-11"><a href="#cb27-11"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb27-12"><a href="#cb27-12"></a>}</span>
<span id="cb27-13"><a href="#cb27-13"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb27-14"><a href="#cb27-14"></a><span class="co"># https://prompthero.com/prompt/d4f36f0dcdf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-23-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-23-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = mdjrny-v4 style Incredibly detailed technical diagram of the profile of a woman with the top and back of her head split into complex geometric shapes and flowers growing from the shapes, Chiaroscuro lighting, fine intricate details</p>
<p>Negative = long neck, skinny</p>
</div>
</div>
<div id="cell-52" class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style Incredibly detailed technical diagram of the profile of a woman with the top and back of her head split into complex geometric shapes and flowers growing from the shapes, Chiaroscuro lighting, fine intricate details"</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>negative_prompt <span class="op">=</span> <span class="st">"long neck, skinny"</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>payload <span class="op">=</span> {</span>
<span id="cb28-4"><a href="#cb28-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb28-5"><a href="#cb28-5"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb28-6"><a href="#cb28-6"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb28-7"><a href="#cb28-7"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb28-8"><a href="#cb28-8"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb28-9"><a href="#cb28-9"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb28-10"><a href="#cb28-10"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb28-11"><a href="#cb28-11"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb28-12"><a href="#cb28-12"></a>}</span>
<span id="cb28-13"><a href="#cb28-13"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb28-14"><a href="#cb28-14"></a><span class="co"># https://prompthero.com/prompt/0c8536f3b23</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-24-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-24-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-24-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="fairy-landscapes" class="level3">
<h3 class="anchored" data-anchor-id="fairy-landscapes">Fairy Landscapes</h3>
<p>You can also create very detailed and colorful photos of landscapes.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>mdjrny-v4 style painting of a fairy forest, dream light, full of colors, mushroom tree, dim light, super detailed, unreal engine 5, hdr, 12k, by Vincent Van Goth</p>
</div>
</div>
<div id="cell-54" class="cell" data-tags="[]" data-execution_count="53">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style painting of a fairy forest, dream light, full of colors, mushroom tree, dim light, super detailed, unreal engine 5, hdr, 12k, by Vincent Van Goth"</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>payload <span class="op">=</span> {</span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb29-4"><a href="#cb29-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb29-8"><a href="#cb29-8"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb29-9"><a href="#cb29-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb29-10"><a href="#cb29-10"></a>}</span>
<span id="cb29-11"><a href="#cb29-11"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="co"># https://prompthero.com/prompt/19c0ad9cac1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-25-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-25-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-25-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-digital-art-prompts" class="level3">
<h3 class="anchored" data-anchor-id="other-digital-art-prompts">Other digital art prompts</h3>
<p>Some other prompt examples where the results are very impressive.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>mdjrny-v4 style little dragon staring at magic spell book sitting on a table in the catacombs, hypermaximalist, insanely detailed and intricate, octane render, unreal engine, 8k, by greg rutkowski and Peter Mohrbacher and magali villeneuve</p>
</div>
</div>
<div id="cell-56" class="cell" data-tags="[]" data-execution_count="54">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style little dragon staring at magic spell book sitting on a table in the catacombs, hypermaximalist, insanely detailed and intricate, octane render, unreal engine, 8k, by greg rutkowski and Peter Mohrbacher and magali villeneuve"</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>payload <span class="op">=</span> {</span>
<span id="cb30-3"><a href="#cb30-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb30-4"><a href="#cb30-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb30-5"><a href="#cb30-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb30-6"><a href="#cb30-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb30-7"><a href="#cb30-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb30-8"><a href="#cb30-8"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb30-9"><a href="#cb30-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb30-10"><a href="#cb30-10"></a>}</span>
<span id="cb30-11"><a href="#cb30-11"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb30-12"><a href="#cb30-12"></a><span class="co"># https://prompthero.com/prompt/63c7ed7865f</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-26-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-26-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>mdjrny-v4 style, magic spell book sitting on a table in the catacombs, hypermaximalist, insanely detailed and intricate, octane render, unreal engine, 8k, by greg rutkowski and Peter Mohrbacher and magali villeneuve</p>
</div>
</div>
<div id="cell-58" class="cell" data-tags="[]" data-execution_count="55">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a>prompt <span class="op">=</span> <span class="st">"mdjrny-v4 style, magic spell book sitting on a table in the catacombs, hypermaximalist, insanely detailed and intricate, octane render, unreal engine, 8k, by greg rutkowski and Peter Mohrbacher and magali villeneuve"</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>payload <span class="op">=</span> {</span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb31-5"><a href="#cb31-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb31-6"><a href="#cb31-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb31-7"><a href="#cb31-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb31-8"><a href="#cb31-8"></a>    <span class="st">"guidance_scale"</span>: <span class="dv">14</span>,</span>
<span id="cb31-9"><a href="#cb31-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb31-10"><a href="#cb31-10"></a>}</span>
<span id="cb31-11"><a href="#cb31-11"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb31-12"><a href="#cb31-12"></a><span class="co"># https://prompthero.com/prompt/4c1a987fec7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-27-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-27-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-27-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-59" class="cell" data-tags="[]" data-execution_count="58">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1"></a>remove_model_endpoint(model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="fantasyai-anything-v4.0" class="level2">
<h2 class="anchored" data-anchor-id="fantasyai-anything-v4.0">FantasyAI Anything V4.0</h2>
<p><a href="https://huggingface.co/andite/anything-v4.0">anything-v4.0</a> is another model with a particular style. It is also based on Stable Diffusion and is good at producing high-quality, highly detailed anime styles with just a few prompts.</p>
<p>Let’s get this model up and running.</p>
<div id="cell-61" class="cell" data-tags="[]" data-execution_count="59">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a>model_id <span class="op">=</span> <span class="st">"huggingface-txt2img-andite-anything-v4-0"</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>model_predictor <span class="op">=</span> get_model_endpoint(model_id, sagemaker_session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>---------!</code></pre>
</div>
</div>
<section id="realistic-people-1" class="level3">
<h3 class="anchored" data-anchor-id="realistic-people-1">Realistic people</h3>
<p>I used a simple prompt to get a portrait of a casual boy sitting in the coffee shop. From the results, you can see that it has a notable anime and manga taste. In addition, the boy’s eyes, hairstyle, clothes, and lighting all represent anime fashion.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>1boy, bishounen, casual, indoors, sitting, coffee shop, bokeh</p>
</div>
</div>
<div id="cell-63" class="cell" data-tags="[]" data-execution_count="60">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a>prompt <span class="op">=</span> <span class="st">"1boy, bishounen, casual, indoors, sitting, coffee shop, bokeh"</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>payload <span class="op">=</span> {</span>
<span id="cb35-3"><a href="#cb35-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb35-4"><a href="#cb35-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb35-5"><a href="#cb35-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb35-6"><a href="#cb35-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb35-7"><a href="#cb35-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb35-8"><a href="#cb35-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb35-9"><a href="#cb35-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb35-10"><a href="#cb35-10"></a>}</span>
<span id="cb35-11"><a href="#cb35-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-30-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-30-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-30-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Let’s also try the same prompt we used to generate portraits of a young woman. But this time, all the generated images are in anime style.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores</p>
<p>Negative = disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&amp;w</p>
</div>
</div>
<div id="cell-65" class="cell" data-tags="[]" data-execution_count="61">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1"></a>prompt <span class="op">=</span> <span class="st">"photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores"</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>negative_prompt <span class="op">=</span> <span class="st">"disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&amp;w"</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>payload <span class="op">=</span> {</span>
<span id="cb36-4"><a href="#cb36-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb36-5"><a href="#cb36-5"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb36-6"><a href="#cb36-6"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb36-7"><a href="#cb36-7"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb36-8"><a href="#cb36-8"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb36-9"><a href="#cb36-9"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb36-10"><a href="#cb36-10"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb36-11"><a href="#cb36-11"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb36-12"><a href="#cb36-12"></a>}</span>
<span id="cb36-13"><a href="#cb36-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-31-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-31-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-31-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>I have found that “anything-v4.0” model has a tendency to generate nude images. It could be because their creators have also used such images while finetuning the model. You have to rely on the negative prompt to restrict the model from generating such images.</p>
</div>
</div>
</section>
<section id="landscapes-1" class="level3">
<h3 class="anchored" data-anchor-id="landscapes-1">Landscapes</h3>
<p>Let’s also try our castle prompt. Again the generative images are representative of anime and manga styles.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ</p>
</div>
</div>
<div id="cell-67" class="cell" data-tags="[]" data-execution_count="62">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a>prompt <span class="op">=</span> <span class="st">"A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ"</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>payload <span class="op">=</span> {</span>
<span id="cb37-3"><a href="#cb37-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb37-4"><a href="#cb37-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb37-5"><a href="#cb37-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb37-6"><a href="#cb37-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb37-7"><a href="#cb37-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb37-8"><a href="#cb37-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb37-9"><a href="#cb37-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb37-10"><a href="#cb37-10"></a>}</span>
<span id="cb37-11"><a href="#cb37-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-32-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-32-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-32-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-68" class="cell" data-tags="[]" data-execution_count="66">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1"></a>remove_model_endpoint(model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="mo-di-diffusion" class="level2">
<h2 class="anchored" data-anchor-id="mo-di-diffusion">Mo Di Diffusion</h2>
<p><a href="https://huggingface.co/nitrosocke/mo-di-diffusion">mo-di-diffusion</a> is another model good at expressing Disney animation studio style. It is based on Stable Diffusion 1.5 and fine-tuned on screenshots from Disney animation studio. However, users must use the tokens <code>modern disney style</code> in the prompts to get the desired effect.</p>
<div id="cell-70" class="cell" data-tags="[]" data-execution_count="67">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>model_id <span class="op">=</span> <span class="st">"huggingface-txt2img-nitrosocke-mo-di-diffusion"</span></span>
<span id="cb39-2"><a href="#cb39-2"></a>model_predictor <span class="op">=</span> get_model_endpoint(model_id, sagemaker_session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>----------!</code></pre>
</div>
</div>
<section id="realistic-people-2" class="level3">
<h3 class="anchored" data-anchor-id="realistic-people-2">Realistic people</h3>
<p>Let’s start with our same “young boy in a coffee shop” prompt. This time the young boy is an attractive youthful adult characteristic of the Disney Animation world. The generated photographs have a very close resemblance to <a href="https://disney.fandom.com/wiki/Kristoff">Kristoff from Frozen</a> or <a href="https://disney.fandom.com/wiki/Tadashi_Hamada">Tadashi from Big Hero 6</a>.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>modern disney style 1boy, bishounen, casual, indoors, sitting, coffee shop, bokeh</p>
</div>
</div>
<div id="cell-72" class="cell" data-tags="[]" data-execution_count="69">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a>prompt <span class="op">=</span> <span class="st">"modern disney style 1boy, bishounen, casual, indoors, sitting, coffee shop, bokeh"</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>payload <span class="op">=</span> {</span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb41-4"><a href="#cb41-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb41-5"><a href="#cb41-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb41-6"><a href="#cb41-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb41-7"><a href="#cb41-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb41-8"><a href="#cb41-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb41-9"><a href="#cb41-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb41-10"><a href="#cb41-10"></a>}</span>
<span id="cb41-11"><a href="#cb41-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-35-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-35-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The same is the case with a photo of young women. They remind me of <a href="https://en.wikipedia.org/wiki/Moana_(character)">Princess Moana</a> from Disney World. But, unfortunately, the last image is distorted because MoDi is based on Stable Diffusion, which has these inherent limitations.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Prompt = modern disney style photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores</p>
<p>Negative = disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&amp;w</p>
</div>
</div>
<div id="cell-74" class="cell" data-tags="[]" data-execution_count="70">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1"></a>prompt <span class="op">=</span> <span class="st">"modern disney style photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores"</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>negative_prompt <span class="op">=</span> <span class="st">"disfigured, ugly, bad, immature, crowd, people"</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>payload <span class="op">=</span> {</span>
<span id="cb42-4"><a href="#cb42-4"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb42-5"><a href="#cb42-5"></a>    <span class="st">"negative_prompt"</span>: negative_prompt,</span>
<span id="cb42-6"><a href="#cb42-6"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb42-7"><a href="#cb42-7"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb42-8"><a href="#cb42-8"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb42-9"><a href="#cb42-9"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb42-10"><a href="#cb42-10"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb42-11"><a href="#cb42-11"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb42-12"><a href="#cb42-12"></a>}</span>
<span id="cb42-13"><a href="#cb42-13"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-36-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-36-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-36-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="landscapes-and-architectures" class="level3">
<h3 class="anchored" data-anchor-id="landscapes-and-architectures">Landscapes and architectures</h3>
<p>I have also tried generating landscapes and building architectures. Both cases have a heavy touch of Disney World animation style.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>“modern disney style A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ</p>
</div>
</div>
<div id="cell-76" class="cell" data-tags="[]" data-execution_count="71">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a>prompt <span class="op">=</span> <span class="st">"modern disney style A beautiful castle beside a waterfall in the woods, by Josef Thoma, matte painting, trending on artstation HQ"</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>payload <span class="op">=</span> {</span>
<span id="cb43-3"><a href="#cb43-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb43-4"><a href="#cb43-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb43-5"><a href="#cb43-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb43-6"><a href="#cb43-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb43-7"><a href="#cb43-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb43-8"><a href="#cb43-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb43-9"><a href="#cb43-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb43-10"><a href="#cb43-10"></a>}</span>
<span id="cb43-11"><a href="#cb43-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-37-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-37-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-37-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>modern disney style A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k</p>
</div>
</div>
<div id="cell-78" class="cell" data-tags="[]" data-execution_count="72">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1"></a>prompt <span class="op">=</span> <span class="st">"modern disney style A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k"</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>payload <span class="op">=</span> {</span>
<span id="cb44-3"><a href="#cb44-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb44-4"><a href="#cb44-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb44-5"><a href="#cb44-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb44-6"><a href="#cb44-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb44-7"><a href="#cb44-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb44-8"><a href="#cb44-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb44-9"><a href="#cb44-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb44-10"><a href="#cb44-10"></a>}</span>
<span id="cb44-11"><a href="#cb44-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-38-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-38-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-38-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-79" class="cell" data-tags="[]" data-execution_count="73">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a>remove_model_endpoint(model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="inkpunk-diffusion" class="level2">
<h2 class="anchored" data-anchor-id="inkpunk-diffusion">Inkpunk Diffusion</h2>
<p>Our last model to try is <a href="https://huggingface.co/Envvi/Inkpunk-Diffusion">Inkpunk-Diffusion</a>. It is also based on Stable Diffusion and fine-tuned for “Inky” and “Punky” styles. We have to use <code>nvinkpunk</code> in our prompts to summon this style. If you find that the <em>InkPunk style</em> is very dominating in the outcomes, then try experimenting without this token to get a lighter version of this style.</p>
<p>Let’s get this model up and running.</p>
<div id="cell-81" class="cell" data-tags="[]" data-execution_count="74">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1"></a>model_id <span class="op">=</span> <span class="st">"huggingface-txt2img-envvi-inkpunk-diffusion"</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>model_predictor <span class="op">=</span> get_model_endpoint(model_id, sagemaker_session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>----------!</code></pre>
</div>
</div>
<section id="realistic-people-and-portraits-1" class="level3">
<h3 class="anchored" data-anchor-id="realistic-people-and-portraits-1">Realistic people and portraits</h3>
<p>I asked for a “medieval cleric woman”. In the <em>InkPunk world</em>, the lady turned out to be a super-rocky astro-woman from the century 2100. But the style is fantastic.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>nvinkpunk Complex detailed painting of a fantasy medieval cleric woman walking through a field of flowers by rembrandt, cleric wearing a tiara and a ornate embroidered hooded cloak, bright blue eyes, evocative, sharp focus, close shot, long blonde hair, high contrast, low saturation, lush flower field and clouds background, backlighting.</p>
</div>
</div>
<div id="cell-83" class="cell" data-tags="[]" data-execution_count="75">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1"></a>prompt <span class="op">=</span> <span class="st">"nvinkpunk Complex detailed painting of a fantasy medieval cleric woman walking through a field of flowers by rembrandt, cleric wearing a tiara and a ornate embroidered hooded cloak, bright blue eyes, evocative, sharp focus, close shot, long blonde hair, high contrast, low saturation, lush flower field and clouds background, backlighting."</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>payload <span class="op">=</span> {</span>
<span id="cb48-3"><a href="#cb48-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb48-4"><a href="#cb48-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb48-5"><a href="#cb48-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb48-6"><a href="#cb48-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb48-7"><a href="#cb48-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb48-8"><a href="#cb48-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb48-9"><a href="#cb48-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb48-10"><a href="#cb48-10"></a>}</span>
<span id="cb48-11"><a href="#cb48-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-41-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-41-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-41-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="landscapes-and-architectures-1" class="level3">
<h3 class="anchored" data-anchor-id="landscapes-and-architectures-1">Landscapes and architectures</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>nvinkpunk A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k</p>
</div>
</div>
<div id="cell-85" class="cell" data-tags="[]" data-execution_count="76">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1"></a>prompt <span class="op">=</span> <span class="st">"nvinkpunk A Hyperrealistic photograph of Italian architectural modern home in Italy, lens flares, cinematic, hdri, matte painting, concept art, celestial, soft render, highly detailed, octane render, architectural HD, HQ, 4k, 8k"</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>payload <span class="op">=</span> {</span>
<span id="cb49-3"><a href="#cb49-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb49-4"><a href="#cb49-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb49-5"><a href="#cb49-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb49-6"><a href="#cb49-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb49-7"><a href="#cb49-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb49-8"><a href="#cb49-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb49-9"><a href="#cb49-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb49-10"><a href="#cb49-10"></a>}</span>
<span id="cb49-11"><a href="#cb49-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-42-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-42-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-42-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-digital-art-prompts-1" class="level3">
<h3 class="anchored" data-anchor-id="other-digital-art-prompts-1">Other digital art prompts</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>nvinkpunk bomb diffuser robot with assault rifle strapped to the top, killer robot</p>
</div>
</div>
<div id="cell-87" class="cell" data-tags="[]" data-execution_count="77">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1"></a>prompt <span class="op">=</span> <span class="st">"nvinkpunk bomb diffuser robot with assault rifle strapped to the top, killer robot"</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>payload <span class="op">=</span> {</span>
<span id="cb50-3"><a href="#cb50-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb50-4"><a href="#cb50-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb50-5"><a href="#cb50-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb50-6"><a href="#cb50-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb50-7"><a href="#cb50-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb50-8"><a href="#cb50-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb50-9"><a href="#cb50-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb50-10"><a href="#cb50-10"></a>}</span>
<span id="cb50-11"><a href="#cb50-11"></a>query_model_and_display(payload, model_predictor)</span>
<span id="cb50-12"><a href="#cb50-12"></a><span class="co"># https://prompthero.com/prompt/67bc77c123f</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-43-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-43-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-43-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>nvinkpunk f-18 Fighter Jet flying over a city, comic book style, bold colors and lines</p>
</div>
</div>
<div id="cell-89" class="cell" data-tags="[]" data-execution_count="78">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1"></a>prompt <span class="op">=</span> <span class="st">"nvinkpunk f-18 Fighter Jet flying over a city, comic book style, bold colors and lines"</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>payload <span class="op">=</span> {</span>
<span id="cb51-3"><a href="#cb51-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb51-4"><a href="#cb51-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb51-5"><a href="#cb51-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb51-6"><a href="#cb51-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb51-7"><a href="#cb51-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb51-8"><a href="#cb51-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb51-9"><a href="#cb51-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb51-10"><a href="#cb51-10"></a>}</span>
<span id="cb51-11"><a href="#cb51-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-44-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-44-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-44-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>nvinkpunk steampunk style blimp, Jules Verne, mechanical</p>
</div>
</div>
<div id="cell-91" class="cell" data-tags="[]" data-execution_count="79">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1"></a>prompt <span class="op">=</span> <span class="st">"nvinkpunk steampunk style blimp, Jules Verne, mechanical"</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>payload <span class="op">=</span> {</span>
<span id="cb52-3"><a href="#cb52-3"></a>    <span class="st">"prompt"</span>: prompt,</span>
<span id="cb52-4"><a href="#cb52-4"></a>    <span class="st">"width"</span>: <span class="dv">512</span>,</span>
<span id="cb52-5"><a href="#cb52-5"></a>    <span class="st">"height"</span>: <span class="dv">512</span>,</span>
<span id="cb52-6"><a href="#cb52-6"></a>    <span class="st">"num_images_per_prompt"</span>: <span class="dv">3</span>,</span>
<span id="cb52-7"><a href="#cb52-7"></a>    <span class="st">"num_inference_steps"</span>: <span class="dv">120</span>,</span>
<span id="cb52-8"><a href="#cb52-8"></a>    <span class="st">"guidance_scale"</span>: <span class="fl">7.5</span>,</span>
<span id="cb52-9"><a href="#cb52-9"></a>    <span class="st">"seed"</span>: <span class="dv">1</span>,</span>
<span id="cb52-10"><a href="#cb52-10"></a>}</span>
<span id="cb52-11"><a href="#cb52-11"></a>query_model_and_display(payload, model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-45-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-45-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="2023-05-10-amazon-jumpstart-text2img-stablediffusion_files/figure-html/cell-45-output-3.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-92" class="cell" data-tags="[]" data-execution_count="81">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1"></a>remove_model_endpoint(model_predictor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/hassaanbinaslam\.github\.io\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="hassaanbinaslam/myblog_utterances" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>